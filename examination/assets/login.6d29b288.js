import{n as _}from"./navbar.758bfc20.js";import{a as g,p as w}from"./rules.0121f61b.js";import{_ as v}from"./index.481b1b11.js";import{r,o as y,j as b,k as o,l as n,w as a,F as k,t as m,m as $,p as F,n as V}from"./vendor.53736fc6.js";const E={username:g,password:w},L={name:"login",components:{navbar:_},created(){console.log("/prod-api/");const e=this;window.addEventListener("keydown",e.keydownEnter,!1)},mounted(){this.form.username===""?this.$refs.username.focus():this.form.password===""&&this.$refs.password.focus()},destroyed(){const e=this;window.removeEventListener("keydown",e.keydownEnter,!1)},watch:{$route:{handler(e){e.redirectedFrom&&(this.redirect=e.redirectedFrom.fullPath,this.otherQuery=e.redirectedFrom.query,this.otherParams=e.redirectedFrom.params)},immediate:!0}},data(){return{rules:E,loading:!1,redirect:void 0,otherQuery:{},otherParams:{},form:{username:"",password:""}}},methods:{test(){this.$router.push({path:"/goods"})},keydownEnter(e){e.code=="Enter"&&this.handleLogin()},handleLogin(){this.$refs.loginForm.validate(e=>{e?(this.loading=!0,this.$store.dispatch("login",this.form).then(()=>{this.$router.push({path:this.redirect||"/",query:this.otherQuery,params:this.otherParams}),this.loading=!1}).catch(s=>{this.$message({message:s,type:"error",duration:1500}),this.loading=!1})):this.$message({message:this.$t("validateFail"),type:"error",duration:1500})})}}},C=e=>(F("data-v-69a4ced9"),e=e(),V(),e),I={class:"login-container"},P=C(()=>n("div",{class:"left"},null,-1)),S={class:"right"};function x(e,s,B,N,t,p){const u=r("navbar"),i=r("el-input"),d=r("el-form-item"),c=r("el-button"),h=r("el-form"),f=r("el-card");return y(),b(k,null,[o(u),n("div",I,[o(f,null,{default:a(()=>[P,n("div",S,[n("h3",null,m(e.$t("login")),1),o(h,{ref:"loginForm",rules:t.rules,"label-position":"top",model:t.form,autocomplete:"on","label-width":"80px"},{default:a(()=>[o(d,{prop:"username",label:e.$t("account")},{default:a(()=>[o(i,{ref:"username",modelValue:t.form.username,"onUpdate:modelValue":s[0]||(s[0]=l=>t.form.username=l),autocomplete:"on"},null,8,["modelValue"])]),_:1},8,["label"]),o(d,{prop:"password",label:e.$t("password")},{default:a(()=>[o(i,{ref:"password",modelValue:t.form.password,"onUpdate:modelValue":s[1]||(s[1]=l=>t.form.password=l),autocomplete:"on","show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{loading:t.loading,onClick:p.handleLogin},{default:a(()=>[$(m(e.$t("login")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["rules","model"])])]),_:1})])],64)}var j=v(L,[["render",x],["__scopeId","data-v-69a4ced9"]]);export{j as default};
